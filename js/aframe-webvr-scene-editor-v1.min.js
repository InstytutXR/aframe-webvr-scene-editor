var selectedPrimitive="box",selectedColor="#FFFFFF",toDelete=0,primitives=1,incrementPositionX=0,incrementPositionY=.5,incrementPositionZ=0,incrementScaleX=1,incrementScaleY=1,incrementScaleZ=1,incrementRotationX=0,incrementRotationY=0,incrementRotationZ=0,incrementUIRotation=0;AFRAME.registerComponent("visual-feedback",{schema:{colorHover:{type:"color",default:"#FF0099"}},init:function(){var e=this.el,t=this.data,i=e.getAttribute("material").color;e.addEventListener("mouseenter",function(){e.setAttribute("material","color",t.colorHover)}),e.addEventListener("mouseleave",function(){e.setAttribute("material","color",i)})}}),AFRAME.registerComponent("default-primitive",{init:function(){document.querySelector("#webvr-display").setAttribute("text",{value:"<a-"+selectedPrimitive+' color="'+selectedColor+'">\n</a-'+selectedPrimitive+">"})}}),AFRAME.registerComponent("transform-position",{schema:{axis:{type:"string"},direction:{type:"string"},value:{type:"number",default:.1}},init:function(){var e=this.el,t=this.data,i=!1,n=document.querySelector("#position-x-value"),o=document.querySelector("#position-y-value"),r=document.querySelector("#position-z-value");n.setAttribute("text",{value:incrementPositionX}),o.setAttribute("text",{value:incrementPositionY}),r.setAttribute("text",{value:incrementPositionZ}),e.addEventListener("mouseenter",function(){i=!0}),e.addEventListener("mouseleave",function(){i=!1}),document.body.addEventListener("triggerdown",function(){if(i){var e=document.querySelector("#entity"+(toDelete-1));0<toDelete&&"x"===t.axis&&("positive"===t.direction?(incrementPositionX+=parseFloat(t.value.toFixed(2)),e.object3D.position.x=incrementPositionX):"negative"===t.direction&&(incrementPositionX-=parseFloat(t.value.toFixed(2)),e.object3D.position.x=incrementPositionX),n.setAttribute("text",{value:parseFloat(incrementPositionX.toFixed(2))})),0<toDelete&&"y"===t.axis&&("positive"===t.direction?(incrementPositionY+=parseFloat(t.value.toFixed(2)),e.object3D.position.y=incrementPositionY):"negative"===t.direction&&(incrementPositionY-=parseFloat(t.value.toFixed(2)),e.object3D.position.y=incrementPositionY),o.setAttribute("text",{value:parseFloat(incrementPositionY.toFixed(2))})),0<toDelete&&"z"===t.axis&&("positive"===t.direction?(incrementPositionZ+=parseFloat(t.value.toFixed(2)),e.object3D.position.z=incrementPositionZ):"negative"===t.direction&&(incrementPositionZ-=parseFloat(t.value.toFixed(2)),e.object3D.position.z=incrementPositionZ),r.setAttribute("text",{value:parseFloat(incrementPositionZ.toFixed(2))}))}})}}),AFRAME.registerComponent("transform-rotation",{schema:{axis:{type:"string"},direction:{type:"string"},value:{type:"number",default:15}},init:function(){var e=this.el,t=this.data,i=!1,n=document.querySelector("#rotation-x-value"),o=document.querySelector("#rotation-y-value"),r=document.querySelector("#rotation-z-value");n.setAttribute("text",{value:incrementRotationX}),o.setAttribute("text",{value:incrementRotationY}),r.setAttribute("text",{value:incrementRotationZ}),e.addEventListener("mouseenter",function(){i=!0}),e.addEventListener("mouseleave",function(){i=!1}),document.body.addEventListener("triggerdown",function(){if(i){var e=document.querySelector("#entity"+(toDelete-1));0<toDelete&&"x"===t.axis&&("positive"===t.direction?(incrementRotationX+=t.value,e.object3D.rotation.x=Math.PI/180*incrementRotationX):"negative"===t.direction&&(incrementRotationX-=t.value,e.object3D.rotation.x=Math.PI/180*incrementRotationX),n.setAttribute("text",{value:incrementRotationX})),0<toDelete&&"y"===t.axis&&("positive"===t.direction?(incrementRotationY+=t.value,e.object3D.rotation.y=Math.PI/180*incrementRotationY):"negative"===t.direction&&(incrementRotationY-=t.value,e.object3D.rotation.y=Math.PI/180*incrementRotationY),o.setAttribute("text",{value:incrementRotationY})),0<toDelete&&"z"===t.axis&&("positive"===t.direction?(incrementRotationZ+=t.value,e.object3D.rotation.z=Math.PI/180*incrementRotationZ):"negative"===t.direction&&(incrementRotationZ-=t.value,e.object3D.rotation.z=Math.PI/180*incrementRotationZ),r.setAttribute("text",{value:incrementRotationZ}))}})}}),AFRAME.registerComponent("transform-scale",{schema:{axis:{type:"string"},direction:{type:"string"},value:{type:"number",default:1}},init:function(){var e=this.el,t=this.data,i=!1,n=document.querySelector("#scale-x-value"),o=document.querySelector("#scale-y-value"),r=document.querySelector("#scale-z-value");n.setAttribute("text",{value:incrementScaleX}),o.setAttribute("text",{value:incrementScaleY}),r.setAttribute("text",{value:incrementScaleZ}),e.addEventListener("mouseenter",function(){i=!0}),e.addEventListener("mouseleave",function(){i=!1}),document.body.addEventListener("triggerdown",function(){if(i){var e=document.querySelector("#entity"+(toDelete-1));0<toDelete&&"x"===t.axis&&("positive"===t.direction?(incrementScaleX+=parseFloat(t.value.toFixed(2)),e.object3D.scale.x=incrementScaleX):"negative"===t.direction&&(incrementScaleX-=parseFloat(t.value.toFixed(2)),e.object3D.scale.x=incrementScaleX),n.setAttribute("text",{value:parseFloat(incrementScaleX.toFixed(2))})),0<toDelete&&"y"===t.axis&&("positive"===t.direction?(incrementScaleY+=parseFloat(t.value.toFixed(2)),e.object3D.scale.y=incrementScaleY):"negative"===t.direction&&(incrementScaleY-=parseFloat(t.value.toFixed(2)),e.object3D.scale.y=incrementScaleY),o.setAttribute("text",{value:parseFloat(incrementScaleY.toFixed(2))})),0<toDelete&&"z"===t.axis&&("positive"===t.direction?(incrementScaleZ+=parseFloat(t.value.toFixed(2)),e.object3D.scale.z=incrementScaleZ):"negative"===t.direction&&(incrementScaleZ-=parseFloat(t.value.toFixed(2)),e.object3D.scale.z=incrementScaleZ),r.setAttribute("text",{value:parseFloat(incrementScaleZ.toFixed(2))}))}})}}),AFRAME.registerComponent("rotate-ui",{schema:{direction:{type:"string"},value:{type:"number",default:22.5}},init:function(){var e=this.el,t=this.data,i=!1;e.addEventListener("mouseenter",function(){i=!0}),e.addEventListener("mouseleave",function(){i=!1}),document.body.addEventListener("triggerdown",function(){if(i){var e=document.querySelector("#main-wrapper");"ccw"===t.direction?(incrementUIRotation+=t.value,e.setAttribute("rotation",{x:0,y:incrementUIRotation,z:0})):"cw"===t.direction&&(incrementUIRotation-=t.value,e.setAttribute("rotation",{x:0,y:incrementUIRotation,z:0}))}})}}),AFRAME.registerComponent("select-primitive",{schema:{which:{type:"string"}},init:function(){var e=this.el,n=this.data,o=document.querySelector("#box"),r=document.querySelector("#sphere"),c=document.querySelector("#cylinder"),a=document.querySelector("#cone"),u=document.querySelector("#webvr-display"),l=!1;e.addEventListener("mouseenter",function(){l=!0}),e.addEventListener("mouseleave",function(){l=!1}),document.body.addEventListener("triggerdown",function(){"next"===n.which&&primitives<4&&l?primitives+=1:"next"===n.which&&4===primitives&&l?primitives=1:"previous"===n.which&&1<primitives&&l?primitives-=1:"previous"===n.which&&1===primitives&&l&&(primitives=4);for(var e=document.querySelectorAll(".primitives"),t=0;t<e.length;t++){var i=e[t].getAttribute("color","");selectedColor=i,e[t].setAttribute("visible","false")}1===primitives?(o.setAttribute("visible","true"),selectedPrimitive="box"):2===primitives?(r.setAttribute("visible","true"),selectedPrimitive="sphere"):3===primitives?(c.setAttribute("visible","true"),selectedPrimitive="cylinder"):4===primitives&&(a.setAttribute("visible","true"),selectedPrimitive="cone"),u.setAttribute("text",{value:"<a-"+selectedPrimitive+' color="'+selectedColor+'">\n</a-'+selectedPrimitive+">"})})}}),AFRAME.registerComponent("create-entity",{init:function(){var e=this.el,d=document.querySelector("#webvr-display"),b=document.querySelector("a-scene"),y=!1;e.addEventListener("mouseenter",function(){y=!0}),e.addEventListener("mouseleave",function(){y=!1}),document.body.addEventListener("triggerdown",function(){if(y){var e=d.getAttribute("text").value,t=document.createElement("a-entity");t.innerHTML=e,t.setAttribute("class","created"),t.setAttribute("id","entity"+toDelete),2===primitives?(t.setAttribute("position",{x:0,y:1,z:0}),incrementPositionY=1):(t.setAttribute("position",{x:0,y:.5,z:0}),incrementPositionY=.5),b.appendChild(t),d.setAttribute("text",{value:"<a-"+selectedPrimitive+' color="#FFFFFF">\n</a-'+selectedPrimitive+">"});for(var i=document.querySelectorAll(".primitives"),n=0;n<i.length;n++)i[n].setAttribute("color","#FFFFFF");toDelete+=1,incrementScaleZ=incrementScaleY=incrementScaleX=1,incrementRotationZ=incrementRotationY=incrementRotationX=incrementPositionZ=incrementPositionX=0;var o=document.querySelector("#position-x-value"),r=document.querySelector("#position-y-value"),c=document.querySelector("#position-z-value"),a=document.querySelector("#rotation-x-value"),u=document.querySelector("#rotation-y-value"),l=document.querySelector("#rotation-z-value"),s=document.querySelector("#scale-x-value"),m=document.querySelector("#scale-y-value"),v=document.querySelector("#scale-z-value");o.setAttribute("text",{value:incrementPositionX}),r.setAttribute("text",{value:incrementPositionY}),c.setAttribute("text",{value:incrementPositionZ}),a.setAttribute("text",{value:incrementRotationX}),u.setAttribute("text",{value:incrementRotationY}),l.setAttribute("text",{value:incrementRotationZ}),s.setAttribute("text",{value:incrementScaleX}),m.setAttribute("text",{value:incrementScaleY}),v.setAttribute("text",{value:incrementScaleZ})}})}}),AFRAME.registerComponent("copy-entity",{init:function(){var e=this.el,b=!1,y=document.querySelector("a-scene");e.addEventListener("mouseenter",function(){b=!0}),e.addEventListener("mouseleave",function(){b=!1}),document.body.addEventListener("triggerdown",function(){if(b){var e=document.querySelector("#entity"+(toDelete-1));if(0<toDelete){var t=e.innerHTML,i=e.getAttribute("scale"),n=e.getAttribute("rotation"),o=document.createElement("a-entity");o.innerHTML=t,o.setAttribute("scale",i),o.setAttribute("rotation",n),o.setAttribute("class","created"),o.setAttribute("id","entity"+toDelete),2===primitives?(o.setAttribute("position",{x:0,y:1,z:0}),incrementPositionY=1):(o.setAttribute("position",{x:0,y:.5,z:0}),incrementPositionY=.5),y.appendChild(o)}toDelete+=1,incrementScaleZ=incrementScaleY=incrementScaleX=1,incrementRotationZ=incrementRotationY=incrementRotationX=incrementPositionZ=incrementPositionX=0;var r=document.querySelector("#position-x-value"),c=document.querySelector("#position-y-value"),a=document.querySelector("#position-z-value"),u=document.querySelector("#rotation-x-value"),l=document.querySelector("#rotation-y-value"),s=document.querySelector("#rotation-z-value"),m=document.querySelector("#scale-x-value"),v=document.querySelector("#scale-y-value"),d=document.querySelector("#scale-z-value");r.setAttribute("text",{value:incrementPositionX}),c.setAttribute("text",{value:incrementPositionY}),a.setAttribute("text",{value:incrementPositionZ}),u.setAttribute("text",{value:incrementRotationX}),l.setAttribute("text",{value:incrementRotationY}),s.setAttribute("text",{value:incrementRotationZ}),m.setAttribute("text",{value:incrementScaleX}),v.setAttribute("text",{value:incrementScaleY}),d.setAttribute("text",{value:incrementScaleZ})}})}}),AFRAME.registerComponent("delete-entity",{init:function(){var e=this.el,s=!1;e.addEventListener("mouseenter",function(){s=!0}),e.addEventListener("mouseleave",function(){s=!1}),document.body.addEventListener("triggerdown",function(){if(s){var e=document.querySelector("#entity"+(toDelete-1));0<toDelete&&e.parentNode.removeChild(e),toDelete-=1,incrementPositionY=.5,incrementScaleZ=incrementScaleY=incrementScaleX=1,incrementRotationZ=incrementRotationY=incrementRotationX=incrementPositionZ=incrementPositionX=0;var t=document.querySelector("#position-x-value"),i=document.querySelector("#position-y-value"),n=document.querySelector("#position-z-value"),o=document.querySelector("#rotation-x-value"),r=document.querySelector("#rotation-y-value"),c=document.querySelector("#rotation-z-value"),a=document.querySelector("#scale-x-value"),u=document.querySelector("#scale-y-value"),l=document.querySelector("#scale-z-value");t.setAttribute("text",{value:incrementPositionX}),i.setAttribute("text",{value:incrementPositionY}),n.setAttribute("text",{value:incrementPositionZ}),o.setAttribute("text",{value:incrementRotationX}),r.setAttribute("text",{value:incrementRotationY}),c.setAttribute("text",{value:incrementRotationZ}),a.setAttribute("text",{value:incrementScaleX}),u.setAttribute("text",{value:incrementScaleY}),l.setAttribute("text",{value:incrementScaleZ})}})}}),AFRAME.registerComponent("compose-color",{init:function(){var n=this.el,o=document.querySelector("#webvr-display"),r=!1;n.addEventListener("mouseenter",function(){r=!0}),n.addEventListener("mouseleave",function(){r=!1}),document.body.addEventListener("triggerdown",function(){if(r){var e=n.getAttribute("material").color;selectedColor=e,o.setAttribute("text",{value:"<a-"+selectedPrimitive+' color="'+selectedColor+'">\n</a-'+selectedPrimitive+">"});for(var t=document.querySelectorAll(".primitives"),i=0;i<t.length;i++)t[i].setAttribute("color",selectedColor)}})}}),AFRAME.registerComponent("toggle-ui",{init:function(){var e=this.el,i=!1,n=!1;e.addEventListener("mouseenter",function(){i=!0}),e.addEventListener("mouseleave",function(){i=!1}),document.body.addEventListener("triggerdown",function(){if(i){var e=document.querySelectorAll(".hidable");if(!1===n)for(var t=0;t<e.length;t++)e[t].setAttribute("visible","false"),n=!0;else if(!0===n)for(t=0;t<e.length;t++)e[t].setAttribute("visible","true"),n=!1}})}});